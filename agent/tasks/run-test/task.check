#source: log.txt

# check for line Installing: Monitor::Monit:ver<0.0.5>:auth<zef:jonathanstowe>:api<1.0>

~regexp: \s* "Installing:" \s+ (\S+?) ":ver" \S

code: <<RAKU
!raku
my @inst;
for captures()<> -> $i {
    push @inst, "{$i.head}";
}

my $s = get_state();

$s<inst> = @inst;

update_state($s);
RAKU

~regexp: \s* "Testing [FAIL]:" \s+ (\S+?) ":ver" \S

code: <<RAKU
!raku
my @fail;
for captures()<> -> $i {
    push @fail, "{$i.head}";
}

my $s = get_state();

$s<fail> = @fail;

update_state($s);
RAKU


# search for line
# Testing [OK] for UUID::V4:ver<1.0.0>:auth<zef:masukomi>:api<1>

~regexp: \s* "Testing [OK]" \s+ "for" \s+ (\S+?) ":ver" \S

code: <<RAKU
!raku
my @testok;
for captures()<> -> $i {
    push @testok, "{$i.head}";
}

my $s = get_state();

$s<testok> = @testok;

update_state($s);
RAKU
